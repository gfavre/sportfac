{% extends "backend/base.html" %}
{% load i18n sekizai_tags floppyforms staticfiles %}

{% block title %}{% blocktrans %}Absence management{% endblocktrans %} - {{ block.super }}{% endblock %}
{% block page_title %}<i class="icon-calendar"></i>&nbsp;&nbsp;{% trans "Absences" %}{% endblock %}


{% block content %}
<section class="portlet">
  <h4 class="portlet-title"><u>{% trans "Courses" %}</u></h4>
  <ul>
  {% for course in course_list %}
    <li>
      <a href="{{ course.get_absences_url }}">
        {{ course.short_name }}{% if course.name %} - {{ course.name }}{% endif %}
      </a>
    </li>
  {% endfor %}
  </ul>
  <form method="POST" class="form-inline">{% csrf_token %}
    {% form session_form using "floppyforms/layouts/bootstrap-inline.html" %}
    <button type="submit" class="btn btn-secondary">{% trans "Create session for all courses" %}</button>
  </form>
</section>

{% addtoblock "js" %}
<script src="{% static 'js/vendor/moment-with-locales.min.js' %}"></script>
<script src="{% static 'js/vendor/bootstrap-datetimepicker.min.js' %}"></script>
<script src="{% static 'js/vendor/jquery.formset.js' %}"></script>

<script type="text/javascript">
  $(function () {
    $('.datetimepicker').datetimepicker({
        language: '{{ LANGUAGE_CODE }}',
        icons: {time: 'icon-clock',
                date: 'icon-calendar',
                up:   'icon-up-open',
                down: 'icon-down-open'}
        }
    );
 });
</script>

{% endaddtoblock %}

{% include 'absences/absences-table-courses.html' %}

{% endblock content %}