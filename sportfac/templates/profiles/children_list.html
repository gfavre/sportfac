{% extends "wizard.html" %}
{% load i18n %}


{% block title %}{% trans "Your children" %}{% endblock title %}
{% block extra_html %}ng-app="children" ng-controller="ListCtrl"{% endblock extra_html %}
{% block page_header %}
<div class="row simple-page-header">
  <div class="wizard">
    <ul class="steps" >
      {% for step in steps %}
        {% if step.id == 'activities-step' %}
          <li ng-class="{complete: userChildren.length > 0}">
          <span ng-class="{'badge': true, 'badge-success': userChildren.length > 0}">{{ forloop.counter }}</span>
          <a href="{{ step.url }}" ng-show="userChildren.length > 0" style="display: none">{{ step.title }}</a>
          <span ng-hide="userChildren.length > 0">{{ step.title }}</span>          
          <span class="chevron"></span>
        </li>

        {% else %}
      
        <li class="{% if step.current %}active{% else %}{% if step.activable %}complete{% endif %}{% endif %}">
          <span class="badge {% if step.activable %}badge-success{% endif %} {% if step.current %}badge-info{% endif %}">{{ forloop.counter }}</span>
          {% if step.current or not step.activable %}
            {{ step.title }}
          {% else %}
            <a href="{{ step.url }}">{{ step.title }}</a>
          {% endif %}
          
          <span class="chevron"></span>
        </li>
        {% endif %}        
      {% endfor %}
    </ul>
    
    <div class="actions">
      <button type="button" class="btn btn-mini btn-prev" {% if not previous_step %}disabled{% endif %}> <i class="icon-arrow-left"></i>{% trans "Previous"%}</button>
      <button type="button" class="btn btn-mini btn-next" data-last="Finish" ng-disabled="userChildren.length == 0">{% trans "Next"%}<i class="icon-arrow-right"></i></button>
    </div>
  </div>
</div>
<div class="row page-header">
  <h1 class="span12">{% block page_title %}{% trans "About your children" %}{% endblock page_title %}</h1>
</div>
{% endblock page_header %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="span8" ng-view></div>
    <div class="span4" ng-show="userChildren.length !== 0" data-ng-animate="'fade'">
      <h4>{% trans "Edit your children data" %}</h4>
      <ul class="nav nav-list bs-docs-sidenav">
        <li ng-repeat="child in userChildren" ng-class="{active: child.selected}">
          <a href="#/edit/{[{ child.id }]}" data-toggle="tab" ng-click="selectChild(child)"><i class="icon-chevron-left"></i> {[{ child.first_name }]} {[{ child.last_name }]}</a>
        </li>
      </ul>
      <br />
      <a href="#/new" class="btn" ng-show="selectedChild"><i class="icon-plus"></i> {% trans "Add child" %}</a>
    </div>

  </div><!-- end row -->
</div> <!-- end container -->

{% endblock content %}

{% block page_footer %}
  <div class="form-actions">
      <a class="btn" href="{{ previous_step.url }}"><i class="icon-chevron-left"></i> {% trans "Previous"%}</a>
    <div class="pull-right">
      <span ng-hide="userChildren.length > 0" class="btn btn-primary btn-large disabled" >{% trans "Register activities"%} <i class="icon-chevron-right icon-white"></i> </span>

      <a ng-show="userChildren.length > 0" class="btn btn-primary btn-large" href="{{ next_step.url }}" style="display:none">{% trans "Register activities"%} <i class="icon-chevron-right icon-white"></i> </a>
          
  </div>
{% endblock page_footer %}


{% block extra_js %}
  <script src="{{ STATIC_URL }}js/vendor/angular.min.js"></script>
  <script src="{{ STATIC_URL }}js/vendor/angular-cookies.min.js"></script>
  <script src="{{ STATIC_URL }}js/vendor/angular-locale_fr-ch.js"></script>
  <script src="{{ STATIC_URL }}js/vendor/angular-strap.min.js"></script>
  <script src="{{ STATIC_URL }}js/vendor/bootstrap-datepicker.js"></script>
  <script src="{{ STATIC_URL }}js/children/app.js"></script>
  <script src="{{ STATIC_URL }}js/children/services.js"></script>

</body>

{% endblock %}


