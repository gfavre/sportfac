{% extends "base.html" %}
{% load i18n floppyforms %}

{% block title %}{% trans "Login" %}{% endblock %}
{% block page_title %}{% trans "Login" %}{% endblock page_title %}


{% block content %}
{% if form.errors and not form.non_field_errors and not form.this_is_the_login_form.errors %}
<p class="text-error">{% blocktrans %}Please correct the error below.{% endblocktrans %}</p>
{% endif %}

{% if form.non_field_errors or form.this_is_the_login_form.errors %}
  {% for error in form.non_field_errors|add:form.this_is_the_login_form.errors %}
  <p class="text-error">{{ error }}</p>
  {% endfor %}
{% endif %}



<form action="{{ app_path }}" method="post" id="login-form" class="form-horizontal">{% csrf_token %}
  <input type="hidden" name="next" value="{{ next }}" />
  
  {% form form using  %}
  {% formconfig row using "floppyforms/rows/bootstrap.html" %}
  {% formrow form.username  %}

  <div class="form-group {% if form.password.errors %}has-error{% endif %}">
    <label class="col-sm-2 control-label" for="id_password">{% trans 'Password' %}</label>
    <div class="col-sm-10">
      {% formfield form.password %}
      <p class="help-block"><span class="help-inline">{{ form.password.errors }}</span></p>
      <p class="help-block"><a href="{% url 'registration_reset' %}">{% trans 'Forgotten your password or username?' %}</a></p>
    </div>      
  </div>
  
  {% endform %}
  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default">{% trans 'Log in' %}</button>
    </div>
  </div>
</form>
{% endblock content%}

{% block extra_js %}
  <script>
    $('#id_username').focus();
  </script>
{% endblock %}