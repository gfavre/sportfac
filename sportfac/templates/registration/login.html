{% extends "base.html" %}
{% load i18n %}
{% block title %}{% trans "Login" %}{% endblock %}

{% block page_title %}{% trans "Login" %}{% endblock page_title %}


{% block content %}
{% if form.errors and not form.non_field_errors and not form.this_is_the_login_form.errors %}
<p class="text-error">{% blocktrans %}Please correct the error below.{% endblocktrans %}</p>
{% endif %}
      
{% if form.non_field_errors or form.this_is_the_login_form.errors %}
  {% for error in form.non_field_errors|add:form.this_is_the_login_form.errors %}
  <p class="text-error">{{ error }}</p>
  {% endfor %}
{% endif %}

<form action="{{ app_path }}" method="post" id="login-form" class="form-horizontal">{% csrf_token %}
  <input type="hidden" name="next" value="{{ next }}" />
  
  <div class="control-group {% if form.username.errors %}error{% endif %}">
    <label class="control-label" for="id_username">{{ form.username.label }}:</label> 
    <div class="controls">
      {{ form.username }}
      <span class="help-inline">{{ form.username.errors }}</span>
    </div>
  </div>
  
  <div class="control-group {% if form.password.errors %}error{% endif %}">
    <label class="control-label" for="id_password">{% trans 'Password:' %}</label>
    <div class="controls">
      {{ form.password }}
      <span class="help-inline">{{ form.password.errors }}</span><br />
      <a href="{% url 'registration_reset' %}">{% trans 'Forgotten your password or username?' %}</a>
    </div>      
  </div>
  
  <div class="control-group">
    <div class="controls">
      <input type="submit" value="{% trans 'Log in' %}" class="btn btn-primary" />
    </div>
  </div>
</form>
{% endblock content%}

{% block extra_js %}
  <script>
    $('#id_username').focus();
  </script>
{% endblock %}