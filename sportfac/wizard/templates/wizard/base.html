{% extends "base.html" %}
{% load i18n %}

{% block page_header %}
  <div class="container">
    <div class="simple-page-header">
      <div class="wizard">
        <ul class="nav nav-pills justify-content-center mb-4">
          {% for step in steps %}
            <li class="nav-item">
              <a href="{% url 'wizard:step' step.slug %}"
                 class="nav-link {% if step.slug == current_step_slug %}active{% endif %}">
                    <span
                        class="badge {% if step.slug == current_step_slug %}badge-primary{% else %}badge-light{% endif %}">
                        {{ forloop.counter }}
                    </span>
                {{ step.title }}
              </a>
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    {% if total_steps > 0 %}
      <div class="progress mb-4" style="height: 30px;">
        <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
             role="progressbar"
             style="width: {{ progress_percent }}%;"
             aria-valuenow="{{ progress_percent }}" aria-valuemin="0" aria-valuemax="100">
          Step {{ current_index }} of {{ total_steps }} ({{ progress_percent|floatformat:0 }}%)
        </div>
      </div>
    {% else %}
      <p class="text-danger">No steps available. Please check the configuration.</p>
    {% endif %}

    <div class=" page-header">
      <h1>{% block page_title %}{{ current_step.title }}{% endblock page_title %}</h1>
    </div>
  </div>
{% endblock page_header %}

{% block content %}
<div class="card">
  <div class="card-body">
    <p class="lead">{{ current_step.description|safe }}</p>
    {% block wizard_content %}{% endblock wizard_content %}
  </div>
</div>
{% endblock content %}

{% block page_footer %}
  <nav class="hidden-print">
    <ul class="pager">
      {% if previous_step %}
        <li class="previous">
          <a href="{{ previous_step.url }}"><span aria-hidden="true">&larr;</span>
            {% block previous_label %}{% trans "Previous" %}{% endblock %}</a>
        </li>
      {% endif %}
      {% if next_step %}
        <li class="next">
          <a href="{{ next_step.url }}">{% block next_label %}{% trans "Next" %}{% endblock %}<span aria-hidden="true">&rarr;</span></a>
        </li>

      {% endif %}
    </ul>
  </nav>
{% endblock page_footer %}
