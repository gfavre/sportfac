{% extends "base.html" %}
{% load i18n %}

{% block page_header %}
  <div class="container">
    <div class="simple-page-header">
      <div class="wizard">
        <ul class="nav nav-pills justify-content-center mb-4">
          {% for step in steps %}
            <li class="nav-item">
              {% if step.is_ready %}
              <a href="{% url 'wizard:step' step.slug %}"
                 class="nav-link {% if step.slug == current_step_slug %}active{% endif %}">
                    <span
                        class="badge {% if step.slug == current_step_slug %}badge-primary{% else %}badge-light{% endif %}">
                        {{ forloop.counter }}
                    </span>
                {{ step.title }}
              </a>
              {% else %}
              <span class="badge {% if step.slug == current_step_slug %}badge-primary{% else %}badge-light{% endif %}">
                {{ forloop.counter }}
              </span>
              {{ step.title }}
              {% endif %}
            </li>
          {% endfor %}
        </ul>
      </div>
    </div>

    {% if total_steps > 0 %}
      <div class="progress mb-4" style="height: 30px;">
        <div class="progress-bar bg-success progress-bar-striped progress-bar-animated"
             role="progressbar"
             style="width: {{ progress_percent }}%;"
             aria-valuenow="{{ progress_percent }}" aria-valuemin="0" aria-valuemax="100">
          Step {{ current_index }} of {{ total_steps }} ({{ progress_percent|floatformat:0 }}%)
        </div>
      </div>
    {% else %}
      <p class="text-danger">No steps available. Please check the configuration.</p>
    {% endif %}

    <div class=" page-header">
      <h1>{% block page_title %}{{ current_step.title }}
        {% if step.subtitle %}<small>- {{ step.subtitle }}</small>{% endif %}{% endblock page_title %}
      </h1>
    </div>
  </div>
{% endblock page_header %}

{% block content %}
<div class="card">
  <div class="card-body">
    <p class="lead">{{ current_step.description|safe }}</p>
    {% block wizard_content %}{% endblock wizard_content %}
  </div>
</div>
{% endblock content %}
