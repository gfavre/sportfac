<div class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" ng-controller="ActivityDetailCtrl">
        <button type="button" class="close" data-dismiss="modal" ng-click="$hide()"><span aria-hidden="true">&times;</span><span class="sr-only">Fermer</span></button>
        <h4 class="modal-title" id="myModalLabel">{[{ selectedCourse.activity.name }]} <small>(cours n° {[{ selectedCourse.number }]})</small></h4>
        <h5>{[{ selectedCourse.start_date | date:'longDate' }]} - {[{ selectedCourse.end_date | date:'longDate' }]}</h5>
      </div>

<div class="modal-body">
  <dl class="dl-horizontal">
    <dt>Responsable</dt>
    <dd>{[{ selectedCourse.responsible.first  }]} {[{ selectedCourse.responsible.last  }]}
    <div>{[{ selectedCourse.responsible.phone  }]}</div>
    <div><a href="mailto:{[{ selectedCourse.responsible.email  }]}">email</a></div>

    </dd>
    <dt>Lieu</dt><dd>{[{ selectedCourse.place  }]}</dd>
    <dt>Dates</dt>
    <dd ng-switch on="selectedCourse.day">{[{ selectedCourse.number_of_sessions }]} cours, tous les 
      <span ng-switch-when="1">lundis</span>
      <span ng-switch-when="2">mardis</span>
      <span ng-switch-when="3">mercredis</span>
      <span ng-switch-when="4">jeudis</span>
      <span ng-switch-when="5">vendredis</span> de {[{ selectedCourse.start_time }]} à {[{ selectedCourse.end_time }]}<br /> entre le {[{ selectedCourse.start_date | date:'longDate' }]} et le {[{ selectedCourse.end_date | date:'longDate'  }]}
    </dd>
    <dt>Prix</dt><dd>CHF {[{ selectedCourse.price }]}</dd>
  </dl>
  <dl class="dl-horizontal">
    <dt>Places disponibles</dt>
    <dd>
      <div>
        {[{ selectedCourse.count_participants  }]} participants
        <span class="pull-right strong"> {[{ selectedCourse.max_participants }]} places</span>
      </div>
      <div class="progress" style="margin-bottom: 0">
        <div class="progress-bar"
             ng-class="{'progress-bar-success': selectedCourse.count_participants >= selectedCourse.min_participants && selectedCourse.count_participants < selectedCourse.max_participants,
                      'progress-bar-warning': selectedCourse.count_participants < selectedCourse.min_participants,
                      'progress-bar-danger': selectedCourse.count_participants >= selectedCourse.max_participants}"""
             role="progressbar" aria-valuemin="0" aria-valuemax="selectedCourse.max_participants" 
             aria-valuenow="selectedCourse.count_participants"
             style="width: {[{ 100 * selectedCourse.count_participants /  selectedCourse.max_participants }]}%">
          <span ng-show="selectedCourse.count_participants < selectedCourse.max_participants">Places disponibles</span>
          <span ng-show="selectedCourse.count_participants >= selectedCourse.max_participants">Complet</span>
          <span class="sr-only">{[{ selectedCourse.count_participants }]} participants inscrits</span>     
        </div>
      </div>
      <small>{[{ selectedCourse.min_participants }]} participants requis pour que l'activité ait lieu</small>
    </dd>
  </dl>
</div>

<div ng-switch on="selectedEvent.className">
  <div class="modal-footer" ng-switch-when="available">
    <button type="button" class="btn" ng-click="$hide()">Fermer</button>
    <button ng-show="{[{ selectedCourse.count_participants < selectedCourse.max_participants && getRegisteredCourses(selectedChild).length < 4}]}" 
            class="btn btn-success" ng-click="register(selectedEvent);$hide()">Inscrire {[{ selectedChild.first_name }]}</button>
    <span ng-hide="{[{ selectedCourse.count_participants < selectedCourse.max_participants }]}" 
        class="btn btn-info disabled" >Plus de place</span>
    <span ng-show="{[{ selectedCourse.count_participants < selectedCourse.max_participants && getRegisteredCourses(selectedChild).length >= 4}]}" 
        class="btn btn-primary disabled" >Inscrire {[{ selectedChild.first_name }]}</span>
    <p ng-show="getRegisteredCourses(selectedChild).length >= 4" class="text-info" style="margin-top: .4em">Le nombre maximal d'inscriptions par enfant (4) est atteint.</p>


  </div>
  
  <div class="modal-footer" ng-switch-when="registered">
    <button type="button" class="btn" ng-click="$hide()">Fermer</button>
    <button class="btn btn-danger" ng-click="unregister(selectedEvent);$hide()">Désinscrire {[{ selectedChild.first_name }]}</button>
  </div>
  <div class="modal-footer" ng-switch-when="validated">
    L'inscription de votre enfant à ce cours a déjà été validée.

    <button type="button" class="btn" ng-click="$hide()">Fermer</button>
  </div>

  <div class="modal-footer" ng-switch-when="unavailable">
    <button type="button" class="btn" ng-click="$hide()">Fermer</button>
    <button ng-show="{[{ selectedCourse.count_participants < selectedCourse.max_participants }]}" 
            class="btn btn-danger" ng-click="unregister(selectedEvent);$hide()">Désinscrire mon enfant</button>
    <span ng-hide="{[{ selectedCourse.count_participants < selectedCourse.max_participants }]}" 
        class="btn btn-info disabled" >Plus de place</span>
  </div>

  <div class="modal-footer" ng-switch-default>
      <button type="button" class="btn" ng-click="$hide()">Fermer</button>
  </div>

</div>






    </div>
  </div>
</div>
