/**
 * angular-strap
 * @version v2.1.6 - 2015-01-11
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */"use strict";angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var e=this.defaults={animation:"am-fade",prefixClass:"dropdown",placement:"bottom-left",template:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(t,n,r,i){function u(t,u){function v(e){if(e.target===t[0])return;return e.target!==t[0]&&a.hide()}var a={},f=angular.extend({},e,u),l=a.$scope=f.scope&&f.scope.$new()||n.$new();a=r(t,f);var c=t.parent();a.$onKeyDown=function(e){if(!/(38|40)/.test(e.keyCode))return;e.preventDefault();e.stopPropagation();var t=angular.element(a.$element[0].querySelectorAll("li:not(.divider) a"));if(!t.length)return;var n;angular.forEach(t,function(e,t){o&&o.call(e,":focus")&&(n=t)});e.keyCode===38&&n>0?n--:e.keyCode===40&&n<t.length-1?n++:angular.isUndefined(n)&&(n=0);t.eq(n)[0].focus()};var h=a.show;a.show=function(){h();i(function(){f.keyboard&&a.$element.on("keydown",a.$onKeyDown);s.on("click",v)},0,!1);c.hasClass("dropdown")&&c.addClass("open")};var p=a.hide;a.hide=function(){if(!a.$isShown)return;f.keyboard&&a.$element.off("keydown",a.$onKeyDown);s.off("click",v);c.hasClass("dropdown")&&c.removeClass("open");p()};var d=a.destroy;a.destroy=function(){s.off("click",v);d()};return a}var s=angular.element(t.document.body),o=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return u}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(t,r,i,s){var o={scope:t};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","id"],function(e){angular.isDefined(i[e])&&(o[e]=i[e])});i.bsDropdown&&t.$watch(i.bsDropdown,function(e,n){t.content=e},!0);i.bsShow&&t.$watch(i.bsShow,function(e,t){if(!u||!angular.isDefined(e))return;angular.isString(e)&&(e=!!e.match(/true|,?(dropdown),?/i));e===!0?u.show():u.hide()});var u=n(r,o);t.$on("$destroy",function(){u&&u.destroy();o=null;u=null})}}}]);