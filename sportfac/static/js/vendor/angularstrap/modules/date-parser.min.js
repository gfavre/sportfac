/**
 * angular-strap
 * @version v2.1.6 - 2015-01-11
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */"use strict";angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(e){function t(){this.year=1970;this.month=0;this.day=1;this.hours=0;this.minutes=0;this.seconds=0;this.milliseconds=0}function r(){}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function s(e,t){var n=e.length,r=t.toString().toLowerCase();for(var i=0;i<n;i++)if(e[i].toLowerCase()===r)return i;return-1}t.prototype.setMilliseconds=function(e){this.milliseconds=e};t.prototype.setSeconds=function(e){this.seconds=e};t.prototype.setMinutes=function(e){this.minutes=e};t.prototype.setHours=function(e){this.hours=e};t.prototype.getHours=function(){return this.hours};t.prototype.setDate=function(e){this.day=e};t.prototype.setMonth=function(e){this.month=e};t.prototype.setFullYear=function(e){this.year=e};t.prototype.fromDate=function(e){this.year=e.getFullYear();this.month=e.getMonth();this.day=e.getDate();this.hours=e.getHours();this.minutes=e.getMinutes();this.seconds=e.getSeconds();this.milliseconds=e.getMilliseconds();return this};t.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var n=t.prototype,o=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(e,u){var a=function(a){function v(e){var t=Object.keys(h),n,r=[],i=[],s=e;for(n=0;n<t.length;n++)if(e.split(t[n]).length>1){var o=s.search(t[n]);e=e.split(t[n]).join("");h[t[n]]&&(r[o]=h[t[n]])}angular.forEach(r,function(e){e&&i.push(e)});return i}function m(e){return e.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function g(e){var t=Object.keys(c),n,r=e;for(n=0;n<t.length;n++)r=r.split(t[n]).join("${"+n+"}");for(n=0;n<t.length;n++)r=r.split("${"+n+"}").join("("+c[t[n]]+")");e=m(e);return new RegExp("^"+r+"$",["i"])}var f=angular.extend({},o,a),l={},c={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:f.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:f.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:f.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:f.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:e.DATETIME_FORMATS.DAY.join("|"),EEE:e.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:f.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:e.DATETIME_FORMATS.MONTH.join("|"),MMM:e.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:f.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:f.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},h={sss:n.setMilliseconds,ss:n.setSeconds,s:n.setSeconds,mm:n.setMinutes,m:n.setMinutes,HH:n.setHours,H:n.setHours,hh:n.setHours,h:n.setHours,EEEE:r,EEE:r,dd:n.setDate,d:n.setDate,a:function(e){var t=this.getHours()%12;return this.setHours(e.match(/pm/i)?t+12:t)},MMMM:function(t){return this.setMonth(s(e.DATETIME_FORMATS.MONTH,t))},MMM:function(t){return this.setMonth(s(e.DATETIME_FORMATS.SHORTMONTH,t))},MM:function(e){return this.setMonth(1*e-1)},M:function(e){return this.setMonth(1*e-1)},yyyy:n.setFullYear,yy:function(e){return this.setFullYear(2e3+1*e)},y:n.setFullYear},p,d;l.init=function(){l.$format=e.DATETIME_FORMATS[f.format]||f.format;p=g(l.$format);d=v(l.$format)};l.isValid=function(e){return angular.isDate(e)?!isNaN(e.getTime()):p.test(e)};l.parse=function(n,r,i){i&&(i=e.DATETIME_FORMATS[i]||i);angular.isDate(n)&&(n=u(n,i||l.$format));var s=i?g(i):p,o=i?v(i):d,a=s.exec(n);if(!a)return!1;var f=r&&!isNaN(r.getTime())?(new t).fromDate(r):(new t).fromDate(new Date(1970,0,1,0));for(var c=0;c<a.length-1;c++)o[c]&&o[c].call(f,a[c+1]);var h=f.toDate();return parseInt(f.day,10)!==h.getDate()?!1:h};l.getDateForAttribute=function(e,t){var n;if(t==="today"){var r=new Date;n=new Date(r.getFullYear(),r.getMonth(),r.getDate()+(e==="maxDate"?1:0),0,0,0,e==="minDate"?0:-1)}else angular.isString(t)&&t.match(/^".+"$/)?n=new Date(t.substr(1,t.length-2)):i(t)?n=new Date(parseInt(t,10)):angular.isString(t)&&0===t.length?n=e==="minDate"?-Infinity:+Infinity:n=new Date(t);return n};l.getTimeForAttribute=function(e,t){var n;t==="now"?n=(new Date).setFullYear(1970,0,1):angular.isString(t)&&t.match(/^".+"$/)?n=(new Date(t.substr(1,t.length-2))).setFullYear(1970,0,1):i(t)?n=(new Date(parseInt(t,10))).setFullYear(1970,0,1):angular.isString(t)&&0===t.length?n=e==="minTime"?-Infinity:+Infinity:n=l.parse(t,new Date(1970,0,1,0));return n};l.daylightSavingAdjust=function(e){if(!e)return null;e.setHours(e.getHours()>12?e.getHours()+2:0);return e};l.init();return l};return a}]}]);