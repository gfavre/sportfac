/**
 * angular-strap
 * @version v2.1.6 - 2015-01-11
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */"use strict";angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var e=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,n,r){function s(e){var t=i.$targets.$active;for(var n=0;n<t.length;n++){e<t[n]&&(t[n]=t[n]-1);t[n]===i.$targets.length&&(t[n]=i.$targets.length-1)}}function o(e){var t=i.$targets.$active;return t.indexOf(e)===-1?!1:!0}function u(e){var t=i.$targets.$active.indexOf(e);t!==-1&&i.$targets.$active.splice(t,1)}function a(e){i.$options.allowMultiple||i.$targets.$active.splice(0,1);i.$targets.$active.indexOf(e)===-1&&i.$targets.$active.push(e)}var i=this;i.$options=angular.copy(e);angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(e){angular.isDefined(r[e])&&(i.$options[e]=r[e])});i.$toggles=[];i.$targets=[];i.$viewChangeListeners=[];i.$registerToggle=function(e){i.$toggles.push(e)};i.$registerTarget=function(e){i.$targets.push(e)};i.$unregisterToggle=function(e){var t=i.$toggles.indexOf(e);i.$toggles.splice(t,1)};i.$unregisterTarget=function(e){var t=i.$targets.indexOf(e);i.$targets.splice(t,1);i.$options.allowMultiple&&u(e);s(t);i.$viewChangeListeners.forEach(function(e){e()})};i.$targets.$active=i.$options.startCollapsed?[]:[0];i.$setActive=t.$setActive=function(e){angular.isArray(e)?i.$targets.$active=angular.copy(e):i.$options.disallowToggle?a(e):o(e)?u(e):a(e);i.$viewChangeListeners.forEach(function(e){e()})};i.$activeIndexes=function(){return i.$options.allowMultiple?i.$targets.$active:i.$targets.$active.length===1?i.$targets.$active[0]:-1}};this.$get=function(){var n={};n.defaults=e;n.controller=t;return n}}).directive("bsCollapse",["$window","$animate","$collapse",function(e,t,n){var r=n.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",n.controller],link:function(t,n,r,i){var s=i[0],o=i[1];if(s){o.$viewChangeListeners.push(function(){s.$setViewValue(o.$activeIndexes())});s.$formatters.push(function(e){if(angular.isArray(e))o.$setActive(e);else{var t=o.$activeIndexes();angular.isArray(t)?t.indexOf(e*1)===-1&&o.$setActive(e*1):t!==e*1&&o.$setActive(e*1)}return e})}}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(t,n,r,i){var s=i[0],o=i[1];n.attr("data-toggle","collapse");o.$registerToggle(n);t.$on("$destroy",function(){o.$unregisterToggle(n)});n.on("click",function(){var e=r.bsCollapseToggle||o.$toggles.indexOf(n);o.$setActive(e*1);t.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(e){return{require:["^?ngModel","^bsCollapse"],link:function(n,r,i,s){function a(){var t=u.$targets.indexOf(r),n=u.$activeIndexes(),i="removeClass";angular.isArray(n)?n.indexOf(t)!==-1&&(i="addClass"):t===n&&(i="addClass");e[i](r,u.$options.activeClass)}var o=s[0],u=s[1];r.addClass("collapse");u.$options.animation&&r.addClass(u.$options.animation);u.$registerTarget(r);n.$on("$destroy",function(){u.$unregisterTarget(r)});u.$viewChangeListeners.push(function(){a()});a()}}}]);